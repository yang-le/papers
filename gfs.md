Google文件系统
==============

Sanjay Ghemawat， Howard Gobioff，and Shun-Tak Leung

摘要
----

我们设计和实现了Google文件系统，一个用于大规模分布式数据密集型应用的分布式文件系统。她虽然运行在便宜的商用机器上，但能够提供容错性，并为大量的客户端提供较高的整体性能。

虽然与之前的分布式文件系统共享了很多同样的目标，但我们的设计来源于对我们的应用的负荷和所在的技术环境的考察，包括当前和预期的，因此在设定上表现出与早先的文件系统的明显不同。这引导我们对传统的选择做出了重新的审视，并发现了完全不同的设计观点。

该文件系统成功满足了我们的存储需求。作为生产和处理数据的存储平台，她被广泛的部署于google内部，向我们的服务、研究和开发部门提供大量的数据集。最大的数据集群通过部署在一千多台机器上的几千块磁盘，提供了几百TB的数据，并且可以被数以百计的客户端同时访问。

在这篇论文中，我们将介绍被设计来支持分布式应用的文件系统接口扩展，讨论我们设计的诸多方面，并汇报一下她的跑分结果，包括来自实际应用中的数据。

1. 介绍
-------

我们设计并实现了Google文件系统，来满足Google快速增长的数据处理需求。GFS与先前的分布式文件系统有很多共同的目标，例如性能，可扩展性，可靠性，可用性。但由于其设计来自于对当前及预期应用负荷及技术环境的考察，因此又表现出与一些早先的系统截然不同的设计假定。我们重新审视了传统的选择，并在设计层面上进行了颠覆性的尝试。

首先，模组故障被视作是家常便饭而不是意外现象。该文件系统包含由成百上千的廉价的商用部件组成的存储机器，并且会被同样数量的客户机器访问。机器的数量和质量从根本上无法确保在任何时间模组的可用性，并且如果某些模组产生故障，它们可能无法立即从中恢复。我们见过各种各样的问题，有程序Bug引起的，有操作系统漏洞引起的，有人为失误引起的，有磁盘、内存、接线、网络甚至电源供应的中断引起的。因此，例常性的监视，错误检测，容错以及自动恢复必须要集成到系统之中。

第二点，以通常的标准来看，文件是很大的。几个GB的文件是很常见的。每个文件通常都包含许多应用对象例如web页面文档。当我们频繁的与由数以亿计对象组成的TB级的并且仍在快速增长中的数据集打交道时，再来管理数以亿计的KB级的小文件就显得不够明智了，虽然系统仍然能够处理它们。因此，诸如IO操作和块大小之类的参数和设计假定需要重新考量。

第三，大部分的文件都通过于其末尾追加新的数据而处在不断的变化之中，而不是覆盖已有的数据。从实践的角度来看，在文件内进行随机的写入几乎不复存在了。一旦数据被写入，文件就是只读的，并且通常是顺序性的只读。很多数据都有这样的特性。它们中的一些组成了大型数据仓库以便于数据分析程序扫描遍历。另一些则可能是由不断运行着的应用持续产出的数据流。一些可能是存档数据。另一些则是由一个机器产生，转而会被另一个机器处理的中间数据，不管是同步的，还是会被稍后处理。由于在大型文件上这样的一种访问模式，数据追加操作变成了性能优化和原子性保证的焦点，而客户端的缓存的数据块则显得不再那么重要了。

第四，通过应用程序和文件系统API的综合设计来提升灵活性，为整个系统带来了好处。例如，我们弱化了GFS的一致性模型，大大简化了文件系统，同时又不会给应用程序带来过重的负担。我们还引进了一种原子性的追加操作，这允许多个客户端同时追加数据到同一个文件末尾而无需考虑其间额外的同步操作。稍后，这些都会在本文中加以细致的讨论。

现在，有许多不同目的GFS集群被成功部署。最大的一个有超过1000个的存储节点，超过300TB的磁盘空间，并且被来自不同机器上的数百个终端频繁而持续的访问着。

2. 设计概观
-----------

2.1 假定
--------

